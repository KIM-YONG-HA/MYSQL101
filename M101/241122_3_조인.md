# JOIN

``` sql

CREATE TABLE `product` (
  `p_code` char(5) NOT NULL,
  `prdct_name` varchar(50) DEFAULT NULL,
  `price` int DEFAULT NULL,
  PRIMARY KEY (`p_code`)
);

CREATE TABLE `sales` (
  `s_idx` int DEFAULT NULL,
  `p_code` char(5) DEFAULT NULL,
  `ea` int DEFAULT NULL,
  `s_date` date DEFAULT NULL,
  `s_amout` int DEFAULT NULL,
  KEY `p_code` (`p_code`),
  CONSTRAINT `sales_ibfk_1` FOREIGN KEY (`p_code`) REFERENCES `product` (`p_code`)
);


```


``` sql
insert into product (p_code, prdct_name, price) values
("A","키보드", 5000),
("B","마우스", 5000),
("C","프린트", 20000),
("D","모니터", 15000);


insert into sales (s_idx, p_code, ea, s_date) values
(2,"A",2,"2024-11-21"),
(4,"D",4,"2024-11-21"),
(5,"D",5,"2024-11-25"),
(6,"C",2,"2024-11-26"),
(7,"C",1,"2024-11-27");

```





cartesion product
카테젼 프로덕트 


```
mysql> select * from product, sales;
+------------+------------+-------+-----------+------------+------+------------+--------------+
| p_code | prdct_name | price | s_idx | p_code | ea   | s_date | s_amout |
+------------+------------+-------+-----------+------------+------+------------+--------------+
| D          | 모니터     | 15000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| C          | 프린트     | 20000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| B          | 마우스     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| A          | 키보드     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| C          | 프린트     | 20000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| B          | 마우스     |  5000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| A          | 키보드     |  5000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         5 | D          |    5 | 2024-11-25 |         NULL |
| C          | 프린트     | 20000 |         5 | D          |    5 | 2024-11-25 |         NULL |
| B          | 마우스     |  5000 |         5 | D          |    5 | 2024-11-25 |         NULL |
| A          | 키보드     |  5000 |         5 | D          |    5 | 2024-11-25 |         NULL |
| D          | 모니터     | 15000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| C          | 프린트     | 20000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| B          | 마우스     |  5000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| A          | 키보드     |  5000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| D          | 모니터     | 15000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| C          | 프린트     | 20000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| B          | 마우스     |  5000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| A          | 키보드     |  5000 |         7 | C          |    1 | 2024-11-27 |         NULL |
+------------+------------+-------+-----------+------------+------+------------+--------------+
20 rows in set (0.00 sec)


```








## 내부 조인 Inner Join 

일치하는 데이터만 출력한다

product 테이블 에는 A,B,C,D 상품코드 모두가 있고 

sales 테이블에는 A,D,D,C,C 상품코드의 판매 내역만 있는데

내부조인을 할 경우 product의 상품코드 B 부분은 나오지 않는다.



### Inner Join 기본형식
``` sql

SELECT [열] FROM [테이블1] 

INNER JOIN [테이블2]

ON [테이블1.열] = [테이블2.열];

WHERE [조건]

```









``` sql
mysql> select * from product inner join sales on product.p_code = sales.p_code;
+------------+------------+-------+-----------+------------+------+------------+--------------+
| p_code | prdct_name | price | s_idx | p_code | ea   | s_date | s_amout |
+------------+------------+-------+-----------+------------+------+------------+--------------+
| A          | 키보드     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| C          | 프린트     | 20000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| C          | 프린트     | 20000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| D          | 모니터     | 15000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         5 | D          |    5 | 2024-11-25 |         NULL |
+------------+------------+-------+-----------+------------+------+------------+--------------+
5 rows in set (0.00 sec)
```

``` sql

mysql> select * from product as p inner join sales as s on p.p_code = s.p_code;
+------------+------------+-------+-----------+------------+------+------------+--------------+
| p_code | prdct_name | price | s_idx | p_code | ea   | s_date | s_amout |
+------------+------------+-------+-----------+------------+------+------------+--------------+
| A          | 키보드     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| C          | 프린트     | 20000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| C          | 프린트     | 20000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| D          | 모니터     | 15000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         5 | D          |    5 | 2024-11-25 |         NULL |
+------------+------------+-------+-----------+------------+------+------------+--------------+
5 rows in set (0.00 sec)


```



## 외부조인  Outer Join 

left outer join으로 product 테이블을 기준으로 매칭 되는
sales 테이블의 데이터를 출력한다

sales 테이블에 상품코드 B의 내역이 없기 때문에 NULL값으로 출력 


``` sql
ysql> select * from product as p left outer join sales as s on p.p_code = s.p_code;
+------------+------------+-------+-----------+------------+------+------------+--------------+
| p_code | prdct_name | price | s_idx | p_code | ea   | s_date | s_amout |
+------------+------------+-------+-----------+------------+------+------------+--------------+
| A          | 키보드     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| B          | 마우스     |  5000 |      NULL | NULL       | NULL | NULL       |         NULL |
| C          | 프린트     | 20000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| C          | 프린트     | 20000 |         7 | C          |    1 | 2024-11-27 |         NULL |
| D          | 모니터     | 15000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         5 | D          |    5 | 2024-11-25 |         NULL |
+------------+------------+-------+-----------+------------+------+------------+--------------+
6 rows in set (0.00 sec)

```


right outer join

sales 테이블 기준으로 매칭되는 product 테이블 데이터가 같이 출력된다

``` sql
mysql> select * from product as p right outer join sales as s on p.p_code = s.p_code;
+------------+------------+-------+-----------+------------+------+------------+--------------+
| p_code | prdct_name | price | s_idx | p_code | ea   | s_date | s_amout |
+------------+------------+-------+-----------+------------+------+------------+--------------+
| A          | 키보드     |  5000 |         2 | A          |    2 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         4 | D          |    4 | 2024-11-21 |         NULL |
| D          | 모니터     | 15000 |         5 | D          |    5 | 2024-11-25 |         NULL |
| C          | 프린트     | 20000 |         6 | C          |    2 | 2024-11-26 |         NULL |
| C          | 프린트     | 20000 |         7 | C          |    1 | 2024-11-27 |         NULL |
+------------+------------+-------+-----------+------------+------+------------+--------------+
5 rows in set (0.00 sec)

```