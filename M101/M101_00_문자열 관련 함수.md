# MySQL 함수


## 문자열 함수


### CONCAT

CONCAT 함수의 인자 값으로 문자(열) 또는 컬럼을 콤마로 구분하여 작성한다.

``` sql
SELECT CONCAT([문자|컬럼1],[문자|컬럼2],...);
```

``` sql
SELECT CONCAT('M','y','S','Q','L') as col1;
```
``` sql 
mysql> SELECT CONCAT('M','y','S','Q','L') as col1;
+-------+
| col1  |
+-------+
| MySQL |
+-------+
1 row in set (0.00 sec)
```

### SPACE

공백문자를 생성하며 CONCAT과 같이 사용하면 편리하다

#### 기본 형식
``` sql
SELECT CONCAT([문자|컬럼1],SPACE(1),[문자|컬럼2],...);
```
``` sql
mysql> SELECT CONCAT('M','y',SPACE(1),'S','Q','L');
+--------------------------------------+
| CONCAT('M','y',SPACE(1),'S','Q','L') |
+--------------------------------------+
| My SQL                               |
+--------------------------------------+
1 row in set (0.00 sec)
```




### CONCAT_WS

인자값으로 구분자를 사용하여 결합시킨다.

``` sql
SELECT CONCAT_WS([구분자], [문자|컬럼1], [문자|컬럼2], ...);

```

``` sql
mysql> SELECT CONCAT_WS('|', mb_name, mb_addr, mb_birth) as col1 from member;
+-----------------------------------+
| col1                              |
+-----------------------------------+
| 홍길동|서울시 강남구|1990-05-12   |
| 김영희|경기도 수원시|1992-07-23   |
| 이철수|부산시 해운대구|1985-10-30 |
| 박지영|인천시 부평구|1995-03-15   |
+-----------------------------------+
4 rows in set (0.00 sec)
```


### LENGTH

문자열의 크기를 바이트로 반환한다.


#### 기본 형식 

``` sql
SELECT LENGTH([문자(열)|컬럼]);
```

``` sql
SELECT LENGTH(' '), LENGTH('K'), LENGTH('김'), LENGTH('金');
```
``` sql
mysql> SELECT LENGTH(' '), LENGTH('K'), LENGTH('김'), LENGTH('金');
+-------------+-------------+--------------+--------------+
| LENGTH(' ') | LENGTH('K') | LENGTH('김') | LENGTH('金') |
+-------------+-------------+--------------+--------------+
|           1 |           1 |            2 |            2 |
+-------------+-------------+--------------+--------------+
1 row in set (0.00 sec)
```



### CHAR_LENGTH

문자열의 개수를 반환한다.


#### 기본 형식 

``` sql
SELECT CHAR_LENGTH([문자(열)|컬럼]);
```

#### 가나다라, 공백을 포함한 가나다라 조회 
``` sql
SELECT CHAR_LENGTH('가나다라'), CHAR_LENGTH('가 나 다 라 ');
```
``` sql
mysql> SELECT CHAR_LENGTH('가나다라'), CHAR_LENGTH('가 나 다 라 ');
+-------------------------+-----------------------------+
| CHAR_LENGTH('가나다라') | CHAR_LENGTH('가 나 다 라 ') |
+-------------------------+-----------------------------+
|                       4 |                           8 |
+-------------------------+-----------------------------+
1 row in set (0.00 sec)
```



### LEFT

지정한 길이만큼 왼쪽에서부터 문자열 반환한다.

#### 기본형식

``` sql
SELECT LEFT([문자열], [자리수]);
```

#### 일련번호 추출

``` sql
mysql> SELECT LEFT('2024-01-123456', 4);
+---------------------------+
| LEFT('2024-01-123456', 4) |
+---------------------------+
| 2024                      |
+---------------------------+
1 row in set (0.00 sec)
```


### RIGHT

지정한 길이만큼 오른쪽에서부터 문자열 반환한다.

#### 기본형식

``` sql
mysql> SELECT RIGHT('2024-01-123456', 6);
+----------------------------+
| RIGHT('2024-01-123456', 6) |
+----------------------------+
| 123456                     |
+----------------------------+
1 row in set (0.00 sec)

```


### POSITION

지정한 문자까지의 길이를 반환한다.


``` sql
SELECT POSITION([지정문자] IN [문자열|컬럼]);
```

``` sql
SELECT POSITION('@' IN 'test@naver.com');
+-----------------------------------+
| POSITION('@' IN 'test@naver.com') |
+-----------------------------------+
|                                 5 |
+-----------------------------------+
1 row in set (0.00 sec)
```



### SUBSTRING

지정한 범위(시작, 종료)의 문자열을 반환한다.


#### 기본형식 
``` sql
SELECT SUBSTRING([문자열|컬럼], 시작값, 종료값);
```


#### 일련번호 자리수 지정해서 출력

``` sql
mysql> SELECT SUBSTRING('제2024-01-123456호', 2, 14);
+---------------------------------------+
| SUBSTRING('제2024-01-123456호', 2,14) |
+---------------------------------------+
| 2024-01-123456                        |
+---------------------------------------+
1 row in set (0.00 sec)
```


#### 이메일에서 계정 추출 

POSITION, SUBSTRING 응용

``` sql
SELECT SUBSTRING('test@naver.com', 1, POSITION('@' IN 'test@naver.com') - 1 );
```


### REPLACE

특정 문자를 다른 문자로 대체한다.


#### 기본 형식
``` sql
SELECT REPLACE([문자열|컬럼], [찾을문자], [대체문자]);
```
``` sql
mysql> SELECT REPLACE('ABCDE', 'C', '-');
+----------------------------+
| REPLACE('ABCDE', 'C', '-') |
+----------------------------+
| AB-DE                      |
+----------------------------+
1 row in set (0.00 sec)
```

### REPEAT

#### 기본 형식

``` sql
SELECT REPAET([문자열|컬럼], 반복횟수);
```

#### 문자 A를 5번 반복
``` SQL
mysql> SELECT REPEAT('A',5);
+---------------+
| REPEAT('A',5) |
+---------------+
| AAAAA         |
+---------------+
1 row in set (0.00 sec)
```



### REPLACE + REPEAT 응용

#### 문자열 ABCDE에서 AAAAA로 변경하기 
``` sql
mysql> SELECT REPLACE('ABCDE', 'BCDE', 'AAAA');
+----------------------------------+
| REPLACE('ABCDE', 'BCDE', 'AAAA') |
+----------------------------------+
| AAAAA                            |
+----------------------------------+
1 row in set (0.00 sec)

```
``` SQL
mysql> SELECT REPLACE('ABCDE', 'BCDE', REPEAT('A', 4));
+------------------------------------------+
| REPLACE('ABCDE', 'BCDE', REPEAT('A', 4)) |
+------------------------------------------+
| AAAAA                                    |
+------------------------------------------+
1 row in set (0.00 sec)

```

#### 핸드폰 번호 가운데 자리 마스킹하기

``` sql
SELECT REPLACE('010-1234-5678', SUBSTRING('010-1234-5678', 5,4), REPEAT('*',4) );
+---------------------------------------------------------------------------+
| REPLACE('010-1234-5678', SUBSTRING('010-1234-5678', 5,4), REPEAT('*',4) ) |
+---------------------------------------------------------------------------+
| 010-****-5678                                                             |
+---------------------------------------------------------------------------+
1 row in set (0.00 sec)
```




### REVERSE

문자열을 역순으로 출력한다 

#### 기본 형식 
``` sql
SELECT REVERSE([문자열|컬럼]);
```

``` sql
mysql> SELECT REVERSE('ESREVER');
+--------------------+
| REVERSE('ESREVER') |
+--------------------+
| REVERSE            |
+--------------------+
1 row in set (0.00 sec)
```


#### SUBSTRING, CHAR_LENGTH, POSITION, REVERSE 응용

아이피 마지막 자리 *로 바꾸기 
1. 아이피는 . 포함 15자리가 나올 수 있다.    
=> 123.456.789.000
=> 123.456.789 자리수를 구하려면
=> 전체 자리수에서 - 123.456.789 자리수를 뺀다.

```sql
SELECT CHAR_LENGTH('123.456.789.000');
+--------------------------------+
| CHAR_LENGTH('123.456.789.000') |
+--------------------------------+
|                             15 |
+--------------------------------+
1 row in set (0.00 sec)
```


2. 아이피를 뒤집어서 000. 까지의 자리수를 구한다 

``` sql
mysql> SELECT POSITION('.' IN REVERSE('123.456.789.000')) - 1;
+-------------------------------------------------+
| POSITION('.' IN REVERSE('123.456.789.000')) - 1 |
+-------------------------------------------------+
|                                               3 |
+-------------------------------------------------+
1 row in set (0.00 sec)
```

3. CHAR_LENGTH - POSITION 값을 빼준 후 SUBSTRING 종료값으로 사용한다
=> 15 - 3 = 12자리
=> 123.456.789.(자리)

4. SUBSTRING을 이용하여 1부터 계산된 종료값으로 추출한다.
``` sql 
mysql> SELECT SUBSTRING('123.456.789.000', 1, ( CHAR_LENGTH('123.456.789.000') - (POSITION('.' IN REVERSE('123.456.789.000')) - 1) ) ) AS RESULT;
+--------------+
| RESULT       |
+--------------+
| 123.456.789. |
+--------------+
1 row in set (0.00 sec)
```

5. CONCAT으로 *을 붙인다.
``` sql
mysql> SELECT CONCAT(SUBSTRING('123.456.789.000', 1, ( CHAR_LENGTH('123.456.789.000') - (POSITION('.' IN REVERSE('123.456.789.000')) - 1) ) ), '*') AS RESULT;
+---------------+
| RESULT        |
+---------------+
| 123.456.789.* |
+---------------+
1 row in set (0.00 sec)
```



## STRCMP

string compare 

두 문자열이 같은지 비교하며 동일하면 0, 다르면 -1 반환한다.


``` sql
SELECT STRCMP('ABC', 'ABC');
+----------------------+
| STRCMP('ABC', 'ABC') |
+----------------------+
|                    0 |
+----------------------+
1 row in set (0.00 sec)
```

``` sql
mysql> SELECT STRCMP('ABC', 'ABC-');
+-----------------------+
| STRCMP('ABC', 'ABC-') |
+-----------------------+
|                    -1 |
+-----------------------+
1 row in set (0.00 sec)
```

### LPAD

문자열이나 컬럼의 길이를 지정한 길이만큼 왼쪽에서부터 지정한 문자로 채운다.

#### 기본형식
``` sql
SELECT LPAD([문자열|컬럼], [자리수], [채울문자])
```

#### 일련번호의 값이 1이고 6자리의 형식을 맞춰야할 때 
``` sql
mysql> SELECT LPAD('1', 6, '0');
+-------------------+
| LPAD('1', 6, '0') |
+-------------------+
| 000001            |
+-------------------+
1 row in set (0.00 sec)
```

### RPAD

문자열이나 컬럼의 길이를 지정한 길이만큼 오른쪽에서부터 지정한 문자로 채운다.

``` sql
SELECT RPAD([문자열|컬럼], [자리수], [채울문자])
```